# Hosopi3 タンポジ EA

シンプルな単ポジション専用のMT4/MT5 Expert Advisor（EA）です。ナンピン・ゴースト機能を除外したシンプル版です。

## 概要

- **バージョン**: 2.10
- **プラットフォーム**: MetaTrader 4 (MQL4) / MetaTrader 5 (MQL5)
- **タイプ**: 単ポジションEA（ナンピンなし）

## 主な機能

### エントリー機能
- **エントリー方向**: Buy Only / Sell Only / Both（両方向）
- **両建て制御**: 両建て許可/禁止の切り替え
- **初回エントリーのみ**: ポジションがない場合のみエントリー

### 内蔵インジケーター
以下のテクニカル指標を使用したエントリー条件を設定可能：

| インジケーター | 戦略例 |
|--------------|--------|
| MA（移動平均線） | ゴールデンクロス、デッドクロス、価格との位置関係 |
| RSI | 売られすぎ/買われすぎ |
| ボリンジャーバンド | バンドタッチ、ブレイクアウト |
| ストキャスティクス | 売られすぎ/買われすぎ、クロス |
| CCI | 売られすぎ/買われすぎ |
| ADX | +DI/-DIクロス、トレンド強度 |

### 外部インジケーター連携
- カスタムインジケーターのシグナルを使用したエントリー/決済
- バッファ番号指定による柔軟な設定
- 価格条件・数値条件による詳細なフィルタリング

### 決済機能
- **利確（TP）**: ポイント指定
- **損切り（SL）**: ポイント指定
- **トレーリングストップ**: トリガー/オフセット設定
- **最大損失額決済**: 指定金額以上の損失で全決済
- **決済後インターバル**: 決済後の再エントリー待機時間

### フィルター機能
- **曜日フィルター**: 取引する曜日を指定
- **時間フィルター**: 取引時間帯を指定
- **ボラティリティフィルター**: ATRによるフィルタリング
- **スプレッドフィルター**: 最大スプレッド制限
- **有効証拠金チェック**: 最低証拠金を下回るとエントリー停止

### GUI機能
- 操作パネル（自動売買ON/OFF、決済ボタン等）
- ポジションテーブル表示
- インジケーターパネル（各指標の現在値表示）
- 価格ライン表示（平均取得価格、TP/SLライン）

## ファイル構成

```
Hosopi3-Tanpoji/
├── Hosopi3_Tanpoji.mq4           # メインファイル（MT4用）
├── Hosopi3_Tanpoji.mq5           # メインファイル（MT5用）
├── Hosopi3_Tanpoji_Defines.mqh   # 定数・列挙型定義
├── Hosopi3_Tanpoji_Params.mqh    # 入力パラメータ
├── Hosopi3_Tanpoji_Cache.mqh     # キャッシュ管理
├── Hosopi3_Tanpoji_Utils.mqh     # ユーティリティ関数
├── Hosopi3_Tanpoji_Trading.mqh   # トレード処理
├── Hosopi3_Tanpoji_CustomIndicator.mqh  # 外部インジケーター連携
├── Hosopi3_Tanpoji_Strategy.mqh  # 戦略・シグナル判定
├── Hosopi3_Tanpoji_GUI.mqh       # GUI処理
├── Hosopi3_Tanpoji_InfoPanel.mqh # インジケーターパネル
└── Hosopi3_Tanpoji_LightPanel.mqh # 軽量パネル（Comment表示）
```

## インストール

### MT4の場合
1. すべてのファイルを `MQL4/Experts/Hosopi3-Tanpoji/` フォルダにコピー
2. MetaTrader 4を再起動、または「ナビゲータ」で右クリック→「更新」
3. チャートにEAをドラッグ＆ドロップ

### MT5の場合
1. すべてのファイルを `MQL5/Experts/Hosopi3-Tanpoji/` フォルダにコピー
2. MetaTrader 5を再起動、または「ナビゲータ」で右クリック→「更新」
3. チャートにEAをドラッグ＆ドロップ

## 基本的な使い方

1. **マジックナンバー設定**: 他のEAと重複しない番号を設定
2. **ロットサイズ設定**: 取引ロット数を設定
3. **インジケーター設定**: 使用するインジケーターを有効化し、パラメータを設定
4. **条件タイプ設定**: 複数インジケーター使用時の条件（AND/OR）
5. **自動売買開始**: パネルの「AUTO」ボタンをON

## パラメータグループ

| グループ | 説明 |
|---------|------|
| 1. 基本設定 | マジックナンバー、ロット、スプレッド等 |
| 2. 機能制御設定 | 両建て禁止等 |
| 3. 有効証拠金設定 | 最低証拠金チェック |
| 4. TP/SL/トレール設定 | 決済条件 |
| 5. 損失額決済設定 | 最大損失額による全決済 |
| 6. 決済後インターバル設定 | 再エントリー待機 |
| 7. 時間設定 | GMT設定 |
| 8-9. フィルター | 曜日・時間フィルター |
| 10. エントリー条件設定 | AND/OR条件 |
| 11-16. インジケーター設定 | MA, RSI, BB, Stoch, CCI, ADX |
| 17. ボラティリティフィルター | ATRフィルター |
| 18-20. 表示設定 | GUI/パネル設定 |
| 21-30. 外部インジケーター | カスタムインジケーター連携 |
| 31. デバッグ設定 | ログ出力 |

## 注意事項

- 本EAは投資助言を目的としたものではありません
- 実運用前に必ずバックテスト・デモ口座でのテストを行ってください
- 相場状況により損失が発生する可能性があります

## ライセンス

Copyright 2025
